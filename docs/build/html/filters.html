<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Defining Filters &mdash; bayesn 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=01f34227"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Output" href="output.html" />
    <link rel="prev" title="Running BayeSN Jobs" href="running.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            bayesn
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="running.html">Running BayeSN Jobs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Defining Filters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#specifying-filters">Specifying filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bayesn-filters">bayesn-filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automatic-filter-dropping">Automatic filter dropping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Reference / API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bayesn</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Defining Filters</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/filters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="defining-filters">
<span id="filters"></span><h1>Defining Filters<a class="headerlink" href="#defining-filters" title="Link to this heading"></a></h1>
<p>BayeSN does not include any inbuilt filters, favouring an approach separating filters from code allowing you to easily
implement your own filter responses based on a simple yaml file. This allows for new or updated filters to be easily
implemented independently of updates to the package. This section outlines the structure required for the yaml file
which defines the filters.</p>
<p>In order to allow for quick start-up, we provide as a separate download a large set of filter responses along
with an associated filters.yaml file which can be used by BayeSN straight away. Please see below for more details.</p>
<section id="specifying-filters">
<h2>Specifying filters<a class="headerlink" href="#specifying-filters" title="Link to this heading"></a></h2>
<p>One of the arguments for the <code class="docutils literal notranslate"><span class="pre">input.yaml</span></code> file outlined in <a class="reference internal" href="running.html#running-bayesn"><span class="std std-ref">Running BayeSN Jobs</span></a>, <code class="docutils literal notranslate"><span class="pre">filters</span></code>, is used to specify a
path to a separate yaml file which details the filters you wish to use. This can be a small file containing a small
number of filters, or one large file containing all the filters you might ever possibly want to use which only needs to
be made once. This file should have the following structure:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">standards_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/PATH/TO/STANDARDS/ROOT</span>
<span class="nt">standards</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vega</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VEGA_STANDARD.fits/.dat</span>
<span class="w">  </span><span class="nt">bd17</span><span class="p">:</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BD17_STANDARD.fits/.dat</span>
<span class="nt">filters_root</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/PATH/TO/FILTERS/ROOT</span>
<span class="nt">filters</span><span class="p">:</span>
<span class="w">  </span><span class="nt">test_band_1</span><span class="p">:</span>
<span class="w">    </span><span class="nt">magsys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ab</span>
<span class="w">    </span><span class="nt">magzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_band_1_response.dat</span>
<span class="w">  </span><span class="nt">test_band_2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">magsys</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vega</span>
<span class="w">    </span><span class="nt">magzero</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_band_2_response.dat</span>
</pre></div>
</div>
<p>These arguments are described as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">standards_root</span></code>: A directory which all paths in <cite>standard</cite> are defined relative to. For example, if the standard spectrum for Vega is located at <code class="docutils literal notranslate"><span class="pre">\data\standards\VEGA_STANDARD.fits</span></code> and BD17 is at <code class="docutils literal notranslate"><span class="pre">\data\filters\BD17_STANDARD.fits</span></code>, you can just set <code class="docutils literal notranslate"><span class="pre">standards_root:</span> <span class="pre">\data\standards</span></code> and use <code class="docutils literal notranslate"><span class="pre">path:</span> <span class="pre">VEGA_STANDARD.fits</span></code> within the key for Vega and similar for BD17. Alternatively, if you use a relative path this will be treated as being relative to the location of the filters yaml file. You can also use an environment variable here as part of the path e.g. $SNDATA_ROOT. This is an optional argument present for convenience, if not specified it is assumed that the paths for each band are all full paths rather than paths relative to <code class="docutils literal notranslate"><span class="pre">standards_root</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">standards</span></code>: Keys in here define all of the standards you wish to use. For each standard, the key is the name (this can be any string of your choosing), and each must have a <code class="docutils literal notranslate"><span class="pre">path</span></code> specifying the location of the reference spectrum for each standard - this can be either a FITS file with named columns for WAVELENGTH and FLUX, or a text file with columns for each.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filters_root</span></code>: This specifies a directory which all paths in <code class="docutils literal notranslate"><span class="pre">filters</span></code> are defined relative to, behaving exactly as <code class="docutils literal notranslate"><span class="pre">standards_root</span></code> does for <code class="docutils literal notranslate"><span class="pre">standards</span></code>. Again, if you use a relative path this will be treated as being relative to the location of the filters yaml file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filters</span></code>: Keys in here define all of the filters you wish you use. For each filter, the key is the name (again, this can be any string of your choosing). Each filter must have a <code class="docutils literal notranslate"><span class="pre">magsys</span></code> key which either corresponds to one of the standard names defined in <code class="docutils literal notranslate"><span class="pre">standards</span></code> or is set to ‘ab’ (see note below), defining the magnitude system for each band. Each filter must also have a <code class="docutils literal notranslate"><span class="pre">magzero</span></code> key, specifying the magnitude offset for the filter, and a <code class="docutils literal notranslate"><span class="pre">path</span></code> specifying the location of the filter response for each filter.</p></li>
</ul>
<p>Please note, the AB reference source is treated as an analytic function within the code so nothing needs to be included
in <code class="docutils literal notranslate"><span class="pre">standards</span></code> for the AB magnitude system, any filter with <code class="docutils literal notranslate"><span class="pre">magsys:</span> <span class="pre">ab</span></code> will automatically work. If your filters
only use the AB magnitude system, you can just omit the <code class="docutils literal notranslate"><span class="pre">standards</span></code> and <code class="docutils literal notranslate"><span class="pre">standards_root</span></code> keys entirely.</p>
</section>
<section id="bayesn-filters">
<h2>bayesn-filters<a class="headerlink" href="#bayesn-filters" title="Link to this heading"></a></h2>
<p><strong>We optionally provide a collection of common filters along with an associated filters.yaml detailing all of them.</strong>
You can simply download <code class="docutils literal notranslate"><span class="pre">bayesn-filters</span></code> and set <code class="docutils literal notranslate"><span class="pre">filters:</span> <span class="pre">/PATH/TO/bayesn-filters/filters.yaml</span></code> in the input yaml
file, which will enable you to use all of these inbuilt filters.</p>
</section>
<section id="automatic-filter-dropping">
<h2>Automatic filter dropping<a class="headerlink" href="#automatic-filter-dropping" title="Link to this heading"></a></h2>
<p>The wavelength range covered by the model will depend on exactly which model you use. Filters will automatically be
dropped for individual SNe when they fall out of the rest-frame wavelength range covered by the based on their redshift.
The uppper and lower cut off wavelengths for each filter are defined as the wavelength where the filter response first
drops below 0.01 times the maximum value.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="running.html" class="btn btn-neutral float-left" title="Running BayeSN Jobs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="output.html" class="btn btn-neutral float-right" title="Output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Matthew Grayling, Stephen Thorp, Kaisey Mandel.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>